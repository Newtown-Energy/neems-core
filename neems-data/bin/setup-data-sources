#!/bin/bash

# Setup script for neems-data sources
# Replaces the setup_sources.rs binary with simple CLI calls

echo "Setting up data sources..."

# Define the neems-data binary path (adjust if needed)
NEEMS_DATA=`which neems-data`

echo "Adding core data sources..."

$NEEMS_DATA add ping_newtownenergy.com \
    --description "Ping statistics for newtownenergy.com" \
    --interval 10 \
    --active

echo "Adding disk space source..."

$NEEMS_DATA add disk_space \
    --description "Hard drive space usage for mounted drives" \
    --interval 900 \
    --active

echo "Adding battery-specific charging state sources..."


# Battery-specific charging state sources
for battery_id in battery_1 battery_2 battery_3; do
    $NEEMS_DATA add "charging_state_${battery_id}" \
        --description "Calculates the current charging state (charging, discharging, hold) for ${battery_id}" \
        --interval 1 \
        --active
done

echo ""
echo "Data source setup complete!"
echo ""
echo "To view all sources, run: $NEEMS_DATA list"
echo "To start monitoring, run: $NEEMS_DATA monitor"
